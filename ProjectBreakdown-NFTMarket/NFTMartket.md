# NFT Marketplace æ¶æ„åˆ†äº«
NFT Marketplaceåç«¯ä»£ç 

:point_left: [EasySwapBackend](https://github.com/MetaNodeAcademy/ProjectBreakdown-NFTMarket/tree/main/EasySwapBackend) 

:point_left: [EasySwapBase ](https://github.com/MetaNodeAcademy/ProjectBreakdown-NFTMarket/tree/main/EasySwapBase) 

:point_left: [EasySwapSync](https://github.com/MetaNodeAcademy/ProjectBreakdown-NFTMarket/tree/main/EasySwapSync) 

:point_left: [NFT Marketplaceåˆçº¦ä»£ç ](https://github.com/MetaNodeAcademy/ProjectBreakdown-NFTMarket/tree/main/EasySwapContract)

:point_left: [NFT Marketplaceå‰ç«¯ä»£ç ](https://github.com/MetaNodeAcademy/ProjectBreakdown-NFTMarket/tree/main/nft-market-fe) 


[å‰ç«¯åœ°å€ï¼ˆéœ€è¦ç§‘å­¦ä¸Šç½‘ï¼‰](https://nft.zood.work)

è§†é¢‘åœ°å€
-  :tv:: NFT marketplaceé¡¹ç›® æ¶æ„åˆ†äº«: ğŸ“º [è§†é¢‘](https://k22zz.xetlk.com/s/4Dj4xv)
ğŸ“™ [è¯¾ä»¶](https://wcngrtwsafnt.feishu.cn/wiki/UG83wozS6iWGg8ky1sCcUV84nbb?from=from_copylink)

-  :tv:: NFT marketplaceé¡¹ç›® åˆçº¦æ‹†è§£: ğŸ“º [è§†é¢‘](https://k22zz.xetlk.com/s/30cSP3)
ğŸ“™ [è¯¾ä»¶](https://wcngrtwsafnt.feishu.cn/wiki/IjtwwUhUOibXV4kvWyMcfc8OnVc?from=from_copylink)

-  :tv:: NFT marketplaceé¡¹ç›® åˆçº¦æ¨¡å—å®æˆ˜åˆ†äº«1: ğŸ“º [è§†é¢‘](https://k22zz.xetlk.com/s/8SQoV)

-  :tv:: NFT marketplaceé¡¹ç›® åˆçº¦æ¨¡å—å®æˆ˜åˆ†äº«2: ğŸ“º [è§†é¢‘](https://k22zz.xetlk.com/s/lIG86)

-  :tv:: NFT marketplaceé¡¹ç›® åˆçº¦æ¨¡å—å®æˆ˜åˆ†äº«3: ğŸ“º[è§†é¢‘](https://k22zz.xetlk.com/s/E1OK8)

-  :tv:: NFT marketplace Backendæ¨¡å—åˆ†äº«: ğŸ“º [è§†é¢‘](https://k22zz.xetlk.com/s/3yJTtF)

-  :tv:: NFT Marketé¡¹ç›®é¢è¯•æŒ‡å—1: ğŸ“º [è§†é¢‘](https://k22zz.xetlk.com/s/1geNlW)
ğŸ“™ [è¯¾ä»¶](https://wcngrtwsafnt.feishu.cn/wiki/UF7Pw16xli2nrrkSC7Lc7ix8ngf?from=from_copylink)
-  :tv:: NFT Marketé¡¹ç›®é¢è¯•æŒ‡å—2: ğŸ“º [è§†é¢‘](https://k22zz.xetlk.com/s/2AHBaK)

## èƒŒæ™¯ä»‹ç»

2020 å¹´æ˜¯ DeFi å…ƒå¹´

2021 å¹´æ˜¯ NFT å…ƒå¹´

...

1. **æ•°å­—èµ„äº§çš„å…´èµ·ä¸éœ€æ±‚**
2. **å»ä¸­å¿ƒåŒ–çš„å¸‚åœºéœ€æ±‚**
3. **ç‰ˆæƒä¿æŠ¤å’ŒäºŒçº§å¸‚åœº**
4. **å…¨çƒåŒ–å¸‚åœºçš„æ½œåŠ›**
5. **æŠ€æœ¯ä¸é‡‘èçš„èåˆ**

## é¡¹ç›®æ„ä¹‰

å½“å‰çš„ NFT äº¤æ˜“å¸‚åœºä¸ä»…æ˜¯ä¸€ä¸ª**åŸºäºåŒºå—é“¾çš„åº”ç”¨**ï¼Œä¹Ÿæ˜¯**é“¾ä¸ŠæŠ€æœ¯ä¸é“¾ä¸‹æœåŠ¡é«˜åº¦ç»“åˆ**çš„å…¸å‹èŒƒä¾‹ã€‚é€šè¿‡é¡¹ç›®çš„è®¾è®¡å’Œå¼€å‘ï¼Œå¯ä»¥æ¢ç´¢å¦‚ä½•å°†åŒºå—é“¾çš„å»ä¸­å¿ƒåŒ–ã€é€æ˜æ€§ã€ä¸å¯ç¯¡æ”¹ç­‰ç‰¹ç‚¹ä¸ä¼ ç»Ÿçš„é“¾ä¸‹ä¸šåŠ¡æµç¨‹è¿›è¡Œæœ‰æœºèåˆï¼Œåˆ›å»ºä¸€ä¸ªçµæ´»ã€å¯æ‰©å±•çš„ç³»ç»Ÿæ¶æ„ï¼Œä¸ä»…æœåŠ¡äº NFT äº¤æ˜“å¸‚åœºï¼Œ**è¿˜èƒ½æ”¯æŒæœªæ¥å…¶ä»–æ½œåœ¨çš„é“¾ä¸Šåº”ç”¨ï¼Œå¦‚ Bitcoin ä¸Šçš„é“­æ–‡ã€ç¬¦æ–‡ç­‰æ–°å…´æ•°å­—èµ„äº§**ã€‚ä»¥ä¸‹ä»å‡ ä¸ªå…³é”®è§’åº¦è¯´æ˜é¡¹ç›®çš„æ·±è¿œæ„ä¹‰ï¼š

1. **æŠ€æœ¯æ¶æ„çš„é€šç”¨æ€§å’Œå¯æ‰©å±•æ€§**
2. **é“¾ä¸ŠæŠ€æœ¯åŸç†ä¸é“¾ä¸‹æœåŠ¡çš„ç»“åˆ**
3. **å»ä¸­å¿ƒåŒ–åº”ç”¨çš„åœºæ™¯æ‰©å±•**

## NFT åŸºæœ¬æ¦‚å¿µ
![image](https://github.com/user-attachments/assets/da3ba89a-382b-4003-99b0-286a938483b2)
## NFT çš„æ ¸å¿ƒæ“ä½œ
è¯¦è§ï¼š[https://eips.ethereum.org/EIPS/eip-721 ] (https://eips.ethereum.org/EIPS/eip-721)
1. **transfer**
   -  `safeTransferFrom(address _from, address _to, uint256 _tokenId)`
   - `transferFrom(address _from, address _to, uint256 _tokenId)`

2.  **approve**
   - `approve(address _approved, uint256 _tokenId)`
   - `setApprovalForAll(address _operator, bool _approved)`

## NFT æ•°æ®æ¨¡å‹

**Collection** â€”â€”â€”â€” NFT é›†åˆçš„å®ä½“

**Item **â€”â€”â€”â€” ä»£è¡¨äº¤æ˜“ç³»ç»Ÿä¸­ä»£è¡¨ NFT çš„å®ä½“

**Ownership** â€”â€”â€”â€” ä»£è¡¨ NFT çš„æ‰€æœ‰æƒï¼Œä¹Ÿå°±æ˜¯ Item çš„ Ownerï¼Œ å³ Item å’Œ Wallet çš„å…³è”å…³ç³»

**Order **â€”â€”â€”â€” ä»£è¡¨å‡ºå”®æˆ–è´­ä¹° NFT æ„æ„¿çš„å®ä½“ã€‚

**Activity **â€”â€”â€”â€” ä»£è¡¨ NFT çŠ¶æ€ä¸‹å‘ç”Ÿçš„äº‹ä»¶ï¼šmint, transfer, list, buy ç­‰
![image](https://github.com/user-attachments/assets/58d6759f-b0ee-42bb-96f7-5ca528d05fd3)

## **NFT äº¤æ˜“æ¨¡å¼**

1. **NFT è®¢å•åœ¨é“¾ä¸‹**: é dex
2. **NFT è®¢å•åœ¨é“¾ä¸Š**:dex

**è®¢å•ç°¿ OrderBook**: Maker, Taker: ç”¨æˆ·; ä»·æ ¼ç¡®å®šäºè®¢å•

**åšå¸‚å•† AMM**: ERC721â€”â€”AMM: Maker, Taker: ä¸€æ–¹æ˜¯æ± å­, ä¸€æ–¹æ˜¯ç”¨æˆ·; ä»·æ ¼æ˜¯éšæ± å­å˜åŒ–çš„;

## é¡¹ç›®æè¿°
## æ¶æ„å›¾
**API æœåŠ¡**

**äº¤æ˜“åŒæ­¥æœåŠ¡**

**NFT å¯¼å…¥æœåŠ¡**

**è®¢å•ä¸­ç»§æœåŠ¡**

**å®šæ—¶ä»»åŠ¡æ¨¡å—**
![image](https://github.com/user-attachments/assets/96280a12-5a58-477a-8e59-2066bf04b568)

## å¾®æœåŠ¡åŠŸèƒ½æè¿°

**API æœåŠ¡**

æ¶‰åŠ Collectionï¼ŒItemï¼Œ Orderï¼Œ Activity ç­‰å®ä½“çš„ç›¸å…³æ¥å£è¯·æ±‚

```
create table ob_collection_sepolia
(
    id                 bigint auto_increment comment 'ä¸»é”®'
        primary key,
    chain_id           tinyint    default 1 not null comment 'é“¾ç±»å‹(1:ä»¥å¤ªåŠ)',
    symbol             varchar(128)         not null comment 'é¡¹ç›®æ ‡è¯†',
    name               varchar(128)         not null comment 'é¡¹ç›®åç§°',
    creator            varchar(42)          not null comment 'åˆ›å»ºè€…',
    address            varchar(42)          not null comment 'é“¾ä¸Šåˆçº¦åœ°å€',
    owner_amount       bigint     default 0 not null comment 'æ‹¥æœ‰itemäººæ•°',
    item_amount        bigint     default 0 not null comment 'è¯¥é¡¹ç›®NFTçš„å‘è¡Œæ€»é‡',
    floor_price        decimal(30)          null comment 'æ•´ä¸ªcollectionä¸­itemçš„æœ€ä½çš„listingä»·æ ¼',
    sale_price         decimal(30)          null comment 'æ•´ä¸ªcollectionä¸­bidçš„æœ€é«˜çš„ä»·æ ¼',
    description        varchar(2048)        null comment 'é¡¹ç›®æè¿°',
    website            varchar(512)         null comment 'é¡¹ç›®å®˜ç½‘åœ°å€',
          /twitter...
    volume_total       decimal(30)          null comment 'æ€»äº¤æ˜“é‡',
    image_uri          varchar(512)         null comment 'é¡¹ç›®å°é¢å›¾çš„é“¾æ¥',
    // is_need_refresh    tinyint    default 0 not null comment 'æ˜¯å¦éœ€è¦åˆ·æ–°',
    create_time        bigint               null comment 'åˆ›å»ºæ—¶é—´',
    update_time        bigint               null comment 'æ›´æ–°æ—¶é—´',
    constraint index_unique_address
        unique (address)
);

create table ob_item_sepolia
(
    id                 bigint auto_increment comment 'ä¸»é”®'
        primary key,
    chain_id           tinyint      default 1                     not null comment 'é“¾ç±»å‹',
    token_id           varchar(128)                               not null comment 'token_id',
    name               varchar(128)                               not null comment 'nftåç§°',
    owner              varchar(42)                                null comment 'æ‹¥æœ‰è€…',
    collection_address varchar(42)                                null comment 'åˆçº¦åœ°å€',
    creator            varchar(42)                                not null comment 'åˆ›å»ºè€…',
    supply             bigint                                     not null comment 'itemä¾›åº”é‡',
    list_price         decimal(30)                                null comment 'ä¸Šæ¶ä»·æ ¼',
    list_time          bigint                                     null comment 'ä¸Šæ¶æ—¶é—´',
    sale_price         decimal(30)                                null comment 'ä¸Šä¸€æ¬¡æˆäº¤ä»·æ ¼',
    create_time        bigint                                     null comment 'åˆ›å»ºæ—¶é—´',
    update_time        bigint                                     null comment 'æ›´æ–°æ—¶é—´',
    constraint index_collection_token
        unique (collection_address, token_id)
);

create table ob_order_sepolia
(
    id                 bigint auto_increment comment 'ä¸»é”®'
        primary key,
    marketplace_id     tinyint     default 0     not null comment '0.local',
    order_id           varchar(66)               not null comment 'è®¢å•hash',
    order_status       tinyint     default 0     not null comment 'æ ‡è®°è®¢å•çŠ¶æ€',
    order_type         tinyint                   not null comment '1: listing 2:offer 3:collection bid 4:item bid',
    event_time         bigint                    null comment 'è®¢å•æ—¶é—´',
    
    collection_address varchar(42)               null,
    token_id           varchar(128)              null,
    expire_time        bigint                    null,
    price              decimal(30) default 0     not null,
    maker              varchar(42)               null,
    taker              varchar(42)               null,
    quantity_remaining bigint      default 1     not null comment 'erc721: 1, erc1155: n',
    size               bigint      default 1     not null,
    salt               bigint      default 0     null,
    currency_address   varchar(42) default '0x0' not null ,
    create_time        bigint                    null comment 'åˆ›å»ºæ—¶é—´',
    update_time        bigint                    null comment 'æ›´æ–°æ—¶é—´',
    constraint index_hash
        unique (order_id)
);

create table ob_activity_sepolia
(
    id                 bigint auto_increment comment 'ä¸»é”®'
        primary key,
    activity_type      tinyint                 not null comment '(1:Buy,2:Mint,3:List,4:Cancel Listing,5:Cancel Offer,6.Make Offer,7.Sell,8.Transfer,9.Collection-bid,10.Item-bid)',
    maker              varchar(42)             null comment 'å¯¹äºbuy,sell,listing,transferç±»å‹æŒ‡çš„æ˜¯nftæµè½¬çš„èµ·å§‹æ–¹ï¼Œå³å–æ–¹addressã€‚å¯¹äºå…¶ä»–ç±»å‹å¯ä»¥ç†è§£ä¸ºå‘èµ·æ–¹ï¼Œå¦‚make offerè°å‘èµ·çš„fromå°±æ˜¯è°çš„åœ°å€',
    taker              varchar(42)             null comment 'ç›®æ ‡æ–¹,å’Œmakerç›¸å¯¹',
    marketplace_id     tinyint     default 0   not null,
    collection_address varchar(42)             null,
    token_id           varchar(128)            null,
    currency_address   varchar(42) default '1' not null comment 'è´§å¸ç±»å‹(1è¡¨ç¤ºeth)',
    price              decimal(30) default 0   not null comment 'nft ä»·æ ¼',
    block_number       bigint      default 0   not null comment 'åŒºå—å·',
    tx_hash            varchar(66)             null comment 'äº¤æ˜“äº‹åŠ¡hash',
    event_time         bigint                  null comment 'é“¾ä¸Šäº‹ä»¶å‘ç”Ÿçš„æ—¶é—´',
    create_time        bigint                  null comment 'åˆ›å»ºæ—¶é—´',
    update_time        bigint                  null comment 'æ›´æ–°æ—¶é—´',
    constraint index_tx_collection_token_type
        unique (tx_hash, collection_address, token_id, activity_type)
);

```
![image](https://github.com/user-attachments/assets/0de9ed9f-b3bd-47d1-8fcc-263a0fea8add)
![image](https://github.com/user-attachments/assets/eb4df29f-b24b-48a2-869e-7d77bbdbb125)
![image](https://github.com/user-attachments/assets/1ea92e45-7eb7-4a53-b589-d3b23d8a8750)
### äº¤æ˜“åˆçº¦æ ¸å¿ƒåŠŸèƒ½


åŸºäºæ™ºèƒ½åˆçº¦å®ç°åŸºäºè®¢å•ç°¿æ¨¡å‹çš„ NFT äº¤æ˜“ç³»ç»Ÿ, å³èƒ½å¤Ÿæ”¯æŒä»¥ä¸‹å†™å…¥æ“ä½œå’ŒæŸ¥è¯¢æ“ä½œ;

**å†™å…¥æ“ä½œ:**

é“¾ä¸Šè®¢å•ç°¿(OrderBook DEX)æ”¯æŒ create limit sell/buy, market sell/buy order, edit(cancel&create)/cancel order åŠŸèƒ½;

1. **limit sell order:**
2. **limit buy order:**
3. **market sell order:**
4. **market buy order:**
5. **edit/cancel order:**

**æŸ¥è¯¢æ“ä½œ:**

1. æ”¯æŒä»é“¾ä¸ŠæŸ¥è¯¢è®¢å•ï¼ˆåŒ…æ‹¬å·²ç»è¿‡æœŸè®¢å•ï¼‰;

### åˆçº¦æ„æˆåŠç»„ä»¶
1. OrderBookExchange: å®ç°å®Œæ•´çš„è®¢å•ç°¿äº¤æ˜“é€»è¾‘
   1. OrderStorage: ç”¨äºå­˜å‚¨è®¢å•ä¿¡æ¯çš„æ¨¡å—
   2. OrderValidator: ç”¨äºå¤„ç†è®¢å•é€»è¾‘éªŒè¯çš„æ¨¡å—
   3. ProtocolManager: ç”¨äºç®¡ç†åè®®è´¹çš„æ¨¡å—
   4. ...
2. OrderVault: ç‹¬ç«‹å­˜å‚¨è®¢å•ç›¸å…³èµ„äº§çš„æ¨¡å—;
